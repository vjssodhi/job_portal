jQuery(document).ready(function(a){"use strict";var e={init:function(){window.nooImgUploadCount=a("#uploaded-images .uploaded-img").length,this.maxFiles=parseInt(noo_img_upload.max_files),a("#uploaded-images").on("click","a.remove-img",this.removeUploads),this.attach(),this.hideUploader()},attach:function(){if("undefined"!=typeof plupload&&a("#aaiu-uploader").length&&a("#cover-upload").length){var i=new plupload.Uploader(noo_img_upload.plupload);a("#aaiu-uploader").click(function(a){i.start(),a.preventDefault()}),a("#cover-upload").click(function(a){i.start(),a.preventDefault()}),i.init(),i.bind("FilesAdded",function(e,o){a.each(o,function(e,i){a("#aaiu-upload-imagelist").append('<div id="'+i.id+'">'+i.name+" ("+plupload.formatSize(i.size)+") <b></b></div>")}),e.refresh(),i.start()}),i.bind("UploadProgress",function(e,i){a("#"+i.id+" b").html(i.percent+"%")}),i.bind("Error",function(e,i){a("#aaiu-upload-imagelist").append("<div>Error: "+i.code+", Message: "+i.message+(i.file?", File: "+i.file.name:"")+"</div>"),e.refresh()}),i.bind("FileUploaded",function(i,o,d){var t=a.parseJSON(d.response);a("#"+o.id).remove(),t.success&&(window.nooImgUploadCount+=1,a("#company_logo").length>0?(a("#company_logo").val(t.image_id),a("#uploaded-images").empty().css("margin-bottom","10px").append('<div class="uploaded-img" data-imageid="'+t.image_id+'"><img style="max-height: 80px; max-width: 80px;" src="'+t.thumbnail+'" /></div>'),a(".user-sidebar-menu .user-avatar > img").attr("src",t.image),a(".nav-item-member-profile .profile-avatar > img").attr("src",t.image)):a("#cover_image").length>0?(a("#cover_image").val(t.image_id),a("#uploaded-images").empty().css("margin-bottom","10px").append('<div class="uploaded-img" data-imageid="'+t.image_id+'"><img style="max-height: 80px; max-width: 80px;" src="'+t.thumbnail+'" /></div>'),a(".user-sidebar-menu .user-avatar > img").attr("src",t.image),a(".nav-item-member-profile .profile-avatar > img").attr("src",t.image)):a("#profile_image").length>0?(a("#profile_image").val(t.image_id),a("#uploaded-images").empty().css("margin-bottom","10px").append('<div class="uploaded-img" data-imageid="'+t.image_id+'"><img style="max-height: 80px; max-width: 80px;" src="'+t.thumbnail+'" /></div>'),a(".nav-item-member-profile .profile-avatar > img").attr("src",t.image)):a("#uploaded-images").empty().css("margin-bottom","10px").append('<div class="uploaded-img"></div>'),e.hideUploader())})}},hideUploader:function(){0!==e.maxFiles&&window.nooImgUploadCount>=e.maxFiles&&(a("#aaiu-uploader").hide(),a("#cover-upload").hide())},removeUploads:function(i){if(i.preventDefault(),confirm(noo_img_upload.confirmMsg)){var o=a(this),d={attach_id:o.parent().attr("data-imageid"),nonce:noo_img_upload.remove,action:"noo_delete_file"};a.post(noo_img_upload.ajaxurl,d,function(){o.parent().remove(),window.nooImgUploadCount-=1,0!==e.maxFiles&&window.nooImgUploadCount<e.maxFiles&&(a("#aaiu-uploader").show(),a("#cover-upload").show())})}}};e.init()});