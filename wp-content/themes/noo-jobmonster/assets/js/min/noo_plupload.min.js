!function($){function toIntegersAtLease(e){return 10>e?"0"+e:e}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+toIntegersAtLease(this.getUTCMonth())+"-"+toIntegersAtLease(this.getUTCDate())};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.quoteString=function(e){return'"'+e.replace(escapeable,function(e){var t=meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"'},$.toJSON=function(e,t){var n=typeof e;if("undefined"==n)return"undefined";if("number"==n||"boolean"==n)return e+"";if(null===e)return"null";if("string"==n){var r=$.quoteString(e);return r}if("object"==n&&"function"==typeof e.toJSON)return e.toJSON(t);if("function"!=n&&"number"==typeof e.length){for(var o=[],i=0;i<e.length;i++)o.push($.toJSON(e[i],t));return t?"["+o.join(",")+"]":"["+o.join(", ")+"]"}if("function"==n)throw new TypeError("Unable to convert object of type 'function' to json.");var o=[];for(var a in e){var l;if(n=typeof a,"number"==n)l='"'+a+'"';else{if("string"!=n)continue;l=$.quoteString(a)}var u=$.toJSON(e[a],t);"string"==typeof u&&(t?o.push(l+":"+u):o.push(l+": "+u))}return"{"+o.join(", ")+"}"},$.compactJSON=function(e){return $.toJSON(e,!0)},$.evalJSON=function(src){return eval("("+src+")")},$.secureEvalJSON=function(src){var filtered=src;if(filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}}(jQuery),jQuery(document).ready(function(e){"use strict";var t={init:function(){e(".noo-plupload").each(function(){var t=e(this);t.on("click","a.delete-pluploaded",function(n){if(n.preventDefault(),confirm(nooPluploadL10n.confirmMsg)){var r=e(this),o={filename:r.data("filename"),nonce:nooPluploadL10n.remove,action:"noo_plupload_delete_file"},i=r.parent().index();e.post(nooPluploadL10n.ajaxurl,o,function(){r.parent().remove();var n=t.find(".noo-plupload-value"),o=n.val();o=e.secureEvalJSON(o),o.splice(i,1),n.val(e.toJSON(o))})}}),"undefined"!=typeof plupload&&(t.find(".noo-plupload-btn").each(function(){var n=new plupload.Uploader(e(this).data("settings"));n.init(),n.bind("FilesAdded",function(r,o){e.each(o,function(e,n){t.find(".noo-plupload-preview").html('<div id="'+n.id+'">'+n.name+" ("+plupload.formatSize(n.size)+") <b></b></div>")}),r.refresh(),n.start()}),n.bind("UploadProgress",function(t,n){e("#"+n.id+" b").html(n.percent+"%")}),n.bind("Error",function(e,n){t.find(".noo-plupload-preview").html("<div>Error: "+n.code+", Message: "+n.message+(n.file?", File: "+n.file.name:"")+"</div>"),e.refresh()}),n.bind("FileUploaded",function(n,r,o){var i=e.secureEvalJSON(o.response);if("error"==i.status)return t.find(".noo-plupload-preview").prepend(i.error.message),void 0;var a="<strong>"+i.data.filename+"</strong>";if(a="<a class='delete-pluploaded' data-filename='"+i.data.filename+"' href='#' title='Delete File'><i class='fa fa-times-circle' style='color:#f00'></i></a> "+a,e("#"+r.id).html(a),100==r.percent&&i.status&&"ok"==i.status){var l=t.find(".noo-plupload-value"),u=l.val();u=""===u?[]:e.parseJSON(u),u.push(i.data.filename),l.val(e.toJSON(u))}})}),t.on("click",".noo-plupload-btn .plupload-btn",function(e){uploader.start(),e.preventDefault()}))})}};t.init()});